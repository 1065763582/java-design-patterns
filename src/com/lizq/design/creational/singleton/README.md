# 单例模式

创建型

确保一个类只有一个实例，而且自行实例化并向整个系统提供这个实例

#### 适用场景

如果一个类具有一下特点，可以考虑做成单例

1. 全局使用
2. 所有属性保持一致
3. 要求只有一个实例

#### 优点

1. 只有一个实例，节约内存
2. 可以全局访问
3. 避免频繁创建实例，提升效率

#### 缺点

不适用于有独立状态的类

#### 懒汉模式



#### 饿汉模式

HungrySingleton：类初始化过程中实例化单例类，单例会被反射和序列化破坏

EnumInstance：利用枚举实例化，**最佳实践**，无法反射和序列化

#### Q&A

1. 什么时候用单例模式，什么时候用静态类方法？

   评估这个类的方法是否可能被重写，如果不可能重写就用静态类。静态方法不能被重写，只能被隐藏，因此静态方法不具备多态。

2. 类什么时候初始化？

   * 创建类的实例，也就是new的方式

   * 访问某个类或接口的静态变量，或者对该静态变量赋值

   * 调用类的静态方法

   * 反射（如Class.forName(“”)）

   * 初始化某个类的子类，则其父类也会被初始化

   * Java虚拟机启动时被标明为启动类的类（Java Test），直接使用java.exe命令来运行某个主类